<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFC一键分享到抖音</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'PingFang SC', sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 20px; }
        .container { background: white; border-radius: 20px; padding: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); text-align: center; max-width: 400px; width: 100%; }
        
        .share-btn { 
            width: 100%; padding: 18px; margin: 12px 0; border: none; border-radius: 12px; 
            font-size: 17px; font-weight: 600; cursor: pointer; color: white; transition: all 0.3s;
            background: linear-gradient(45deg, #000000, #FE2C55);
        }
        .share-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.15); }
        
        .status-box { margin: 20px 0; padding: 15px; border-radius: 12px; display: none; }
        .loading { background: #e3f2fd; color: #1565c0; display: block; }
        .success { background: #e8f5e9; color: #2e7d32; display: block; }
        .error { background: #ffebee; color: #c62828; display: block; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎯 NFC一键分享</h1>
        <p style="color: #666; margin: 10px 0 30px;">点击直接跳转到抖音发布页面</p>
        
        <button class="share-btn" onclick="shareToDouyin()">
            📹 分享到抖音
        </button>

        <div id="status" class="status-box">
            <p id="status-text">准备就绪</p>
        </div>
    </div>

    <script>
        // ==================== 配置信息 ====================
        const CONFIG = {
            videoUrl: "https://v95-web-sz.douyinvod.com/88254fe929fc8ac62df2e8760f85bcba/68cc133e/video/tos/cn/tos-cn-ve-15/oQ1ArEFnuQD3ZggA1aPgfJEuofI09dLADN11sB/?your_params",
            prefillText: "🌈 分享快乐时刻！每一天都值得被记录和庆祝！🎉\n\n生活中的小确幸就是最大的幸福！💖\n\n#分享快乐 #幸福时光 #生活记录"
        };

        // ==================== 抖音分享函数 ====================
        function shareToDouyin() {
            showStatus('正在跳转到抖音发布页面...', 'loading');
            
            // 抖音官方创作页面Scheme（最有可能直接进入发布页面）
            const douyinScheme = `snssdk1128://microapp/create?type=video&video_url=${encodeURIComponent(CONFIG.videoUrl)}&content=${encodeURIComponent(CONFIG.prefillText)}`;
            
            console.log('使用的Scheme:', douyinScheme);
            
            // 记录开始时间
            const startTime = Date.now();
            
            // 尝试跳转
            window.location.href = douyinScheme;
            
            // 检查跳转结果
            setTimeout(() => {
                if (!document.hidden) {
                    showStatus('跳转失败，尝试备用方案...', 'error');
                    // 备用方案：尝试直接打开抖音
                    setTimeout(() => {
                        window.location.href = 'snssdk1128://main';
                    }, 2000);
                }
            }, 1500);
        }

        // ==================== 辅助函数 ====================
        function showStatus(message, type) {
            const statusBox = document.getElementById('status');
            const statusText = document.getElementById('status-text');
            
            statusText.textContent = message;
            statusBox.className = type;
            statusBox.style.display = 'block';
        }

        // 页面可见性检测
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                showStatus('跳转成功！请在抖音中查看', 'success');
            }
        });
    </script>
</body>
</html>
