<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFCä¸€é”®åˆ†äº«åˆ°æŠ–éŸ³</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'PingFang SC', sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 20px; }
        .container { background: white; border-radius: 20px; padding: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); text-align: center; max-width: 400px; width: 100%; }
        
        .share-btn { 
            width: 100%; padding: 18px; margin: 12px 0; border: none; border-radius: 12px; 
            font-size: 17px; font-weight: 600; cursor: pointer; color: white; transition: all 0.3s;
            background: linear-gradient(45deg, #000000, #FE2C55);
        }
        .share-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.15); }
        
        .status-box { margin: 20px 0; padding: 15px; border-radius: 12px; display: none; }
        .loading { background: #e3f2fd; color: #1565c0; display: block; }
        .success { background: #e8f5e9; color: #2e7d32; display: block; }
        .error { background: #ffebee; color: #c62828; display: block; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ NFCä¸€é”®åˆ†äº«</h1>
        <p style="color: #666; margin: 10px 0 30px;">ç‚¹å‡»ç›´æ¥è·³è½¬åˆ°æŠ–éŸ³å‘å¸ƒé¡µé¢</p>
        
        <button class="share-btn" onclick="shareToDouyin()">
            ğŸ“¹ åˆ†äº«åˆ°æŠ–éŸ³
        </button>

        <div id="status" class="status-box">
            <p id="status-text">å‡†å¤‡å°±ç»ª</p>
        </div>
    </div>

    <script>
        // ==================== é…ç½®ä¿¡æ¯ ====================
        const CONFIG = {
            videoUrl: "https://v95-web-sz.douyinvod.com/88254fe929fc8ac62df2e8760f85bcba/68cc133e/video/tos/cn/tos-cn-ve-15/oQ1ArEFnuQD3ZggA1aPgfJEuofI09dLADN11sB/?your_params",
            prefillText: "ğŸŒˆ åˆ†äº«å¿«ä¹æ—¶åˆ»ï¼æ¯ä¸€å¤©éƒ½å€¼å¾—è¢«è®°å½•å’Œåº†ç¥ï¼ğŸ‰\n\nç”Ÿæ´»ä¸­çš„å°ç¡®å¹¸å°±æ˜¯æœ€å¤§çš„å¹¸ç¦ï¼ğŸ’–\n\n#åˆ†äº«å¿«ä¹ #å¹¸ç¦æ—¶å…‰ #ç”Ÿæ´»è®°å½•"
        };

        // ==================== æŠ–éŸ³åˆ†äº«å‡½æ•° ====================
        function shareToDouyin() {
            showStatus('æ­£åœ¨è·³è½¬åˆ°æŠ–éŸ³å‘å¸ƒé¡µé¢...', 'loading');
            
            // æŠ–éŸ³å®˜æ–¹åˆ›ä½œé¡µé¢Schemeï¼ˆæœ€æœ‰å¯èƒ½ç›´æ¥è¿›å…¥å‘å¸ƒé¡µé¢ï¼‰
            const douyinScheme = `snssdk1128://microapp/create?type=video&video_url=${encodeURIComponent(CONFIG.videoUrl)}&content=${encodeURIComponent(CONFIG.prefillText)}`;
            
            console.log('ä½¿ç”¨çš„Scheme:', douyinScheme);
            
            // è®°å½•å¼€å§‹æ—¶é—´
            const startTime = Date.now();
            
            // å°è¯•è·³è½¬
            window.location.href = douyinScheme;
            
            // æ£€æŸ¥è·³è½¬ç»“æœ
            setTimeout(() => {
                if (!document.hidden) {
                    showStatus('è·³è½¬å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨æ–¹æ¡ˆ...', 'error');
                    // å¤‡ç”¨æ–¹æ¡ˆï¼šå°è¯•ç›´æ¥æ‰“å¼€æŠ–éŸ³
                    setTimeout(() => {
                        window.location.href = 'snssdk1128://main';
                    }, 2000);
                }
            }, 1500);
        }

        // ==================== è¾…åŠ©å‡½æ•° ====================
        function showStatus(message, type) {
            const statusBox = document.getElementById('status');
            const statusText = document.getElementById('status-text');
            
            statusText.textContent = message;
            statusBox.className = type;
            statusBox.style.display = 'block';
        }

        // é¡µé¢å¯è§æ€§æ£€æµ‹
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                showStatus('è·³è½¬æˆåŠŸï¼è¯·åœ¨æŠ–éŸ³ä¸­æŸ¥çœ‹', 'success');
            }
        });
    </script>
</body>
</html>
